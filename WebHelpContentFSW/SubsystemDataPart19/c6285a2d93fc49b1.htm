
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:tocPath="WLAN application (R&amp;S FSW-K91)|Measurement Basics|Signal Processing for Multicarrier Measurements (IEEE 802.11a, g (OFDM), j, p)" MadCap:InPreviewMode="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" MadCap:PathToHelpSystem="../" MadCap:HelpSystemFileName="fsw_k91.xml" MadCap:SearchType="Stem">
<!-- saved from url=(0014)about:internet -->
<head><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9">
</meta>
        <link href="Resources/workspace/css/madcap_mod.css" rel="stylesheet" type="text/css">
</link><title>Block Diagram for Multicarrier Measurements</title>
        <style>
					@import url(Resources/workspace/css/html_help.css);
				</style>
        <link disabled="disabled" href="Resources/workspace/css/html_help.css" rel="stylesheet" type="text/css">
</link>
        <MadCap:concept term="shiv_FSV_K91n_0115-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_76a7713198d011e1aa64a4d66aa85ea5-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_be65d36a2c88a0cb0a00201901913ec4-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_ec6820772c88a0cb0a00201900afdb97-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_152615c82c88a0da0a0020190179c711-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_34dd105f4141fbdd0a00206a001c0d1e-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_339adce841fa66000a710a3100a58701-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_2376e9ea2c88a0da0a00201901fc6437-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_8a1706704141fbdd0a00206a01a139f6-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_8b1d4c522c88a0da0a00201901175af9-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_559f2e854141fbdd0a00206a01e459cd-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_9164b1264141fbdd0a00206a00c3c7a1-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_6b9b19902c88a0da0a0020190055b7f2-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_269565eb2c88a0da0a002019019fa768-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_bba4e6db2c88a0da0a00201900a7ae16-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_1e1074712c88a0da0a0020190096643c-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_6e9ebedc4141fbdd0a00206a01673303-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_9f052c7a4141fbdd0a00206a0046265f-a152f5e2a64dafbf0a002019017fdb4d-en-US;ID_535b70364141fbdd0a00206a0181543f-a152f5e2a64dafbf0a002019017fdb4d-en-US;">
</MadCap:concept>
        <script src="Resources/workspace/jscript/nsr.js">/* <![CDATA[ */
        /* ]]> */</script>
        <script src="SkinSupport/MadCapAll.js" type="text/javascript">/* <![CDATA[ */
        /* ]]> */</script>
    <script src="Resources/workspace/jscript/shortcut.js" type="text/javascript">/* <![CDATA[ */
/* ]]> */</script><script src="Resources/workspace/jscript/dy-shortcut.js" type="text/javascript">/* <![CDATA[ */
/* ]]> */</script></head><body><p><img src="../Data/SkinHTML Help Window/RS_Logo.png" /></p><div id="nsr"><span><a class="chm-breadcrumb" href="helpmerge-hooknode.htm">WLAN application (R&amp;S FSW-K91)</a> &gt; <a class="chm-breadcrumb" href="f528bd9e34654c0e.htm">Measurement Basics</a> &gt; <a class="chm-breadcrumb" href="39d3f535b61044ca.htm">Signal Processing for Multicarrier Measurements (IEEE 802.11a, g (OFDM), j, p)</a> &gt; <span class="chm-breadcrumb">Block Diagram for Multicarrier Measurements</span></span></div><div id="mainbody"><div style="width: 95%" xml:space="preserve">
						<a name="top">
							
						</a>
						
						
						<a name="kanchor193">
</a><a name="kanchor194">
</a><a name="kanchor195">
</a><div class="chm-chaptertitle">Block Diagram for Multicarrier Measurements</div><p>A diagram of the significant blocks when using the IEEE 802.11a, g (OFDM), j, p standard in the R&amp;S<span style="font-family: Arial Unicode MS; font-size: 10.5pt"> </span>FSW WLAN application is shown in <a class="xref" href="#ID_76a7713198d011e1aa64a4d66aa85ea5-a152f5e2a64dafbf0a002019017fdb4d-en-US">Figure "Block diagram for the R&amp;S FSW WLAN application using the IEEE 802.11a, g (OFDM), j, p standard"</a>.</p><p>First the RF signal is downconverted to the IF frequency f<sub>IF</sub>. The resulting IF signal r<sub>IF</sub>(t) is shown on the left-hand side of the figure. After bandpass filtering, the signal is sampled by an analog to digital converter (ADC) at a sample rate of f<sub>s1</sub>. This digital sequence is resampled. Thus, the sample rate of the downsampled sequence r(i) is the Nyquist rate of f<sub>s3</sub> = 20 MHz. Up to this point the digital part is implemented in an ASIC.</p><div class="block" id="ID_76a7713198d011e1aa64a4d66aa85ea5-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/img11eaeeb14aea0ae00a00201900f8b581_2_--_--_PNG96.png" alt="" title=""/></div><div class="caption_figure">Block diagram for the R&amp;S<span style="font-family: Arial Unicode MS; font-size: 10.5pt"> </span>FSW WLAN application using the IEEE 802.11a, g (OFDM), j, p standard</div></div><p>In the lower part of the figure the subsequent digital signal processing is shown.</p><div class="block"><div class="subtitle"><a name="ID_be65d36a2c88a0cb0a00201901913ec4-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Packet search and timing detection</div></div><a name="kanchor196">
</a><a name="kanchor197">
</a><a name="kanchor198">
</a><a name="kanchor199">
</a><a name="kanchor200">
</a><a name="kanchor201">
</a><a name="kanchor202">
</a><a name="kanchor203">
</a><a name="kanchor204">
</a><p>In the first block the <b>packet search</b> is performed. This block detects the <em>long symbol</em> (LS) and recovers the timing. The <b>coarse timing</b> is detected first. This search is implemented in the time domain. The algorithm is based on cyclic repetition within the LS after N = 64 samples. Numerous treatises exist on this subject, e.g. [1] to [3].</p><p>Furthermore, a coarse estimate <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span><img border="0" src="Resources/Images/imgdae627572b93b99c0a0020190043faf3_1_--_--_PNG96.png" alt="" title=""/><sub>coarse</sub> of the Rx-Tx frequency offset <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span>f is derived from the metric in [6]. (The hat generally indicates an estimate, e.g. <img border="0" src="Resources/Images/img863e06902b96b54a0a00201901b07071_1_--_--_PNG96.png" alt="" title=""/> is the estimate of x.) This can easily be understood because the phase of <span class="input">r(i) <span style="font-family: Arial Unicode MS; font-size: 10.5pt">·</span><span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span> r* (i + N)</span> is determined by the frequency offset. As the frequency deviation <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span>f can exceed half a bin (distance between neighboring subcarriers) the preceding <em>short symbol</em> (SS) is also analyzed in order to detect the ambiguity.</p><a name="kanchor205">
</a><a name="kanchor206">
</a><p>After the coarse timing calculation the time estimate is improved by the <b>fine timing</b> calculation. This is achieved by first estimating the coarse frequency response <span class="input"><span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub></span>, where k = {–26.. 26} denotes the channel index of the <em>occupied</em> subcarriers. First the FFT of the LS is calculated. After the FFT calculation the known symbol information of the LS subcarriers is removed by dividing by the symbols. The result is a coarse estimate <span class="input"><span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sub>k</sub></span> of the channel transfer function. In the next step, the complex channel impulse response is computed by an IFFT. Then the energy of the windowed impulse response (the window size is equal to the guard period) is calculated for each trial time. Afterwards the trial time of the maximum energy is detected. This trial time is used to adjust the timing.</p><div class="block"><div class="subtitle"><a name="ID_ec6820772c88a0cb0a00201900afdb97-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Determing the payload window</div></div><a name="kanchor207">
</a><a name="kanchor208">
</a><p>Now the position of the LS is known and the starting point of the useful part of the first payload symbol can be derived. In the next block this calculated time instant is used to position the <b>payload window</b>. Only the payload part is windowed. This is sufficient because the payload is the only subject of the subsequent measurements.</p><a name="kanchor209">
</a><p>In the next block the windowed sequence is <b>compensated</b> by the coarse frequency estimate <em><span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span><img border="0" src="Resources/Images/imgdae627572b93b99c0a0020190043faf3_1_--_--_PNG96.png" alt="" title=""/><sub>course</sub></em>. This is necessary because otherwise inter-channel interference (ICI) would occur in the frequency domain.</p><a name="kanchor210">
</a><p>The transition to the frequency domain is achieved by an FFT of length 64. The FFT is performed symbol-wise for each symbol of the payload ("nof_symbols"). The calculated FFTs are described by<span class="input">r<sub>l,k</sub></span> with:</p><div class="block"><ul class="list"><li value="1">l = {1 ..  nof_symbols} as the symbol index</li><li value="2">k = {–31 .. 32} as the channel index</li></ul></div><a name="kanchor211">
</a><a name="kanchor212">
</a><a name="kanchor213">
</a><p>In case of an additive white Gaussian noise (AWGN) channel, the FFT is described by [4], [5]</p><a name="kanchor214">
</a><div class="block" id="ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/img47218528413b070d0a00206a0056b2b5_1_--_--_PNG96.png" alt="" title=""/></div><div class="caption">FFT</div></div><p>with:</p><div class="block"><ul class="list"><li value="1">K<sub>mod</sub>: the modulation-dependant normalization factor</li><li value="2">a<sub>l,k</sub>: the symbol of subcarrier k at symbol l</li><li value="3">g<sub>l</sub>: the gain at the symbol l in relation to the reference gain g = 1 at the long symbol (LS)</li><li value="4">H<sub>k</sub>: the channel frequency response at the long symbol (LS)</li><li value="5">phase<sub>l</sub>    <sup>(common)</sup>: the common phase drift phase of all subcarriers at symbol l (see <a class="xref" href="#ID_34dd105f4141fbdd0a00206a001c0d1e-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "Common phase drift"</a>)</li><li value="6">phase<sub>l,k</sub>    <sup>(timing)</sup>: the phase of subcarrier k at symbol l caused by the timing drift (see <a class="xref" href="#ID_34dd105f4141fbdd0a00206a001c0d1e-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "Common phase drift"</a>)</li><li value="7">n<sub>l,k</sub>: the independent Gaussian distributed noise samples</li></ul></div><div class="block"><div class="subtitle"><a name="ID_152615c82c88a0da0a0020190179c711-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Phase drift and frequency deviation</div></div><a name="kanchor215">
</a><a name="kanchor216">
</a><p>The common phase drift in <a class="xref" href="#ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "FFT"</a> is given by:</p><div class="block" id="ID_34dd105f4141fbdd0a00206a001c0d1e-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/img025188c72b4753520a002019002360ef_1_--_--_PNG96.png" alt="" title=""/></div><div class="caption">Common phase drift</div></div><p>with</p><div class="block"><ul class="list"><li value="1">N<sub>s</sub> = 80: the number of Nyquist samples of the symbol period</li><li value="2">N = 64: the number of Nyquist samples of the useful part of the symbol</li><li value="3"><span style="font-family: arial; font-size: 10.5pt">Δ</span> f<sub>rest</sub>: the (not yet compensated) frequency deviation</li><li value="4">d<span style="font-family: Arial Unicode MS; font-size: 10.5pt">ϒ</span>    <sub>l</sub>: the phase jitter at the symbol l</li></ul></div><p>In general, the coarse frequency estimate <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span><img border="0" src="Resources/Images/imgdae627572b93b99c0a0020190043faf3_1_--_--_PNG96.png" alt="" title=""/><sub>coarse</sub> (see <a class="xref" href="#ID_76a7713198d011e1aa64a4d66aa85ea5-a152f5e2a64dafbf0a002019017fdb4d-en-US">Figure "Block diagram for the R&amp;S FSW WLAN application using the IEEE 802.11a, g (OFDM), j, p standard"</a>) is not error-free. Therefore the remaining frequency error <span style="font-family: arial; font-size: 10.5pt">Δ</span>f<sub>rest</sub> represents the frequency deviation in r<sub>l,k</sub> not yet compensated. Consequently, the overall frequency deviation of the device under test (DUT) is calculated by:</p><p><span style="font-family: arial; font-size: 10.5pt">Δ</span>f = <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span><img border="0" src="Resources/Images/imgdae627572b93b99c0a0020190043faf3_1_--_--_PNG96.png" alt="" title=""/><sub>coarse</sub> + <span style="font-family: arial; font-size: 10.5pt">Δ</span>f<sub>rest</sub></p><div class="block"><div class="note"><table cellpadding="0" cellspacing="0" border="0"><tr><td width="46" align="left" valign="top"><img src="Resources/workspace/img/info_small_10mm.gif" width="38" height="38" class="note_img"/></td><td><p>The common phase drift in <a class="xref" href="#ID_34dd105f4141fbdd0a00206a001c0d1e-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "Common phase drift"</a> is divided into two parts to calculate the overall frequency deviation of the DUT.</p></td></tr></table></div></div><p>The reason for the phase jitter d<span style="font-family: arial; font-size: 10.5pt">γ</span>    <sub>l</sub> in <a class="xref" href="#ID_34dd105f4141fbdd0a00206a001c0d1e-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "Common phase drift"</a> may be different. The nonlinear part of the phase jitter may be caused by the phase noise of the DUT oscillator. Another reason for nonlinear phase jitter may be the increase of the DUT amplifier temperature at the beginning of the PPDU. Note that besides the nonlinear part the phase jitter, d<span style="font-family: arial; font-size: 10.5pt">γ</span>    <sub>l</sub> also contains a constant part. This constant part is caused by the frequency deviation <span style="font-family: arial; font-size: 10.5pt">Δ</span> f<sub>rest</sub> not yet compensated. To understand this, keep in mind that the measurement of the phase starts at the first symbol l = 1 of the payload. In contrast, the channel frequency response H<sub>k</sub> in <a class="xref" href="#ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "FFT"</a> represents the channel at the long symbol of the preamble. Consequently, the frequency deviation <span style="font-family: arial; font-size: 10.5pt">Δ</span> f<sub>rest</sub> not yet compensated produces a phase drift between the long symbol and the first symbol of the payload. Therefore, this phase drift appears as a constant value ("DC value") in d<span style="font-family: Arial Unicode MS; font-size: 10.5pt">ϒ</span>    <sub>l</sub>.</p><div class="block"><div class="subtitle"><a name="ID_2376e9ea2c88a0da0a00201901fc6437-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Tracking the phase drift, timing jitter and gain</div></div><a name="kanchor217">
</a><a name="kanchor218">
</a><a name="kanchor219">
</a><a name="kanchor220">
</a><a name="kanchor221">
</a><p>Referring to the IEEE 802.11a, g (OFDM), j, p measurement standard, chapter 17.3.9.7 "Transmit modulation accuracy test'' [6], the common phase drift phase<sub>l</sub>    <sup>(common)</sup> must be estimated and compensated from the pilots. Therefore this "symbol-wise phase tracking'' is activated as the default setting of the R&amp;S<span style="font-family: Arial Unicode MS; font-size: 10.5pt"> </span>FSW WLAN application (see <a class="xref" href="14ec3a0ac2a44338.htm#shiv_FSV_K91n_1165-d812af2f133a69280a001ae7157c0c1b-en-US">"Phase Tracking"</a>).</p><p>Furthermore, the timing drift in <a class="xref" href="#ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "FFT"</a> is given by:</p><div class="block" id="ID_8a1706704141fbdd0a00206a01a139f6-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/img79e4b7eb413b70750a00206a016654cd_1_--_--_PNG96.png" alt="" title=""/></div><div class="caption">Timing drift</div></div><p>with <span style="font-family: arial; font-size: 10.5pt">ξ</span>: the relative clock deviation of the reference oscillator</p><p>Normally, a symbol-wise timing jitter is negligible and thus not modeled in <a class="xref" href="#ID_8a1706704141fbdd0a00206a01a139f6-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "Timing drift"</a>. However, there may be situations where the timing drift has to be taken into account. This is illustrated by an example: In accordance to [6], the allowed clock deviation of the DUT is up to <span style="font-family: arial; font-size: 10.5pt">ξ</span>    <sub>max</sub> = 20 ppm. Furthermore, a long packet with 400 symbols is assumed. The result of <a class="xref" href="#ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "FFT"</a> and <a class="xref" href="#ID_8a1706704141fbdd0a00206a01a139f6-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "Timing drift"</a> is that the phase drift of the highest subcarrier k = 26 in the last symbol l = <b>nof_symbols</b> is 93 degrees. Even in the noise-free case, this would lead to symbol errors. The example shows that it is actually necessary to estimate and compensate the clock deviation, which is accomplished in the next block.</p><p>Referring to the IEEE 802.11a, g (OFDM), j, p measurement standard [6], the timing drift phase<sub>l,k</sub><sup>(timing)</sup> is not part of the requirements. Therefore the "time tracking" is not activated as the default setting of the R&amp;S<span style="font-family: Arial Unicode MS; font-size: 10.5pt"> </span>FSW WLAN application (see <a class="xref" href="0124832a61914c1b.htm#shiv_FSV_K91n_1168-8b2a1708133b1a780a001ae762b8337f-en-US">"Timing Error Tracking"</a>). The time tracking option should rather be seen as a powerful analyzing option.</p><p>In addition, the tracking of the gain g<sub>l</sub> in <a class="xref" href="#ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "FFT"</a> is supported for each symbol in relation to the reference gain g = 1 at the time instant of the long symbol (LS). At this time the coarse channel transfer function <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub> is calculated.</p><p>This makes sense since the sequence r<sup>'</sup><sub>l,k</sub> is compensated by the coarse channel transfer function <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub> before estimating the symbols. Consequently, a potential change of the gain at the symbol l (caused, for example, by the increase of the DUT amplifier temperature) may lead to symbol errors especially for a large symbol alphabet M of the MQAM transmission. In this case, the estimation and the subsequent compensation of the gain are useful.</p><p>Referring to the IEEE 802.11a, g (OFDM), j, p measurement standard [6], the compensation of the gain g<sub>l</sub> is not part of the requirements. Therefore the "gain tracking" is not activated as the default setting of the R&amp;S<span style="font-family: Arial Unicode MS; font-size: 10.5pt"> </span>FSW WLAN application (see <a class="xref" href="ee21a821bb1f4350.htm#shiv_FSV_K91n_1171-18855cc5134be50a0a001ae7725da509-en-US">"Level Error (Gain) Tracking"</a>).</p><div class="block"><div class="subtitle"><a name="ID_8b1d4c522c88a0da0a00201901175af9-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Determining the error parameters (log likelihood function)</div></div><a name="kanchor222">
</a><a name="kanchor223">
</a><p>How can the parameters above be calculated? In this application the optimum maximum likelihood algorithm is used. In the first estimation step the symbol-independent parameters <span style="font-family: arial; font-size: 10.5pt">Δ</span> f<sub>rest</sub> and <span style="font-family: arial; font-size: 10.5pt">ξ</span> are estimated. The symbol-dependent parameters can be neglected in this step, i.e. the parameters are set to g<sub>l</sub> = 1 and d<span style="font-family: arial; font-size: 10.5pt">γ</span> = 0. Referring to <a class="xref" href="#ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "FFT"</a>, the log likelihood function L must be calculated as a function of the trial parameters <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span><img border="0" src="Resources/Images/imgab54c3912b8d0c5f0a002019007afcc8_1_--_--_PNG96.png" alt="" title=""/><sub>rest</sub> and <img border="0" src="Resources/Images/img78e5a5382b92697d0a00201900160f99_1_--_--_PNG96.png" alt="" title=""/>. (The tilde generally describes a trial parameter. Example: <img border="0" src="Resources/Images/imgee7924172b9138210a00201900b87e78_1_--_--_PNG96.png" alt="" title=""/> is the trial parameter of x.)</p><div class="block" id="ID_559f2e854141fbdd0a00206a01e459cd-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/img505750db2b63f8bd0a00201900438e73_1_--_--_PNG96.png" alt="" title=""/></div><div class="caption">Log likelihood function (step 1)</div></div><p>The trial parameters leading to the minimum of the log likelihood function are used as estimates <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Δ</span><img border="0" src="Resources/Images/imgdae627572b93b99c0a0020190043faf3_1_--_--_PNG96.png" alt="" title=""/><sub>rest</sub> and <img border="0" src="Resources/Images/img7e6bd7ec2b9541750a002019010bca5c_1_--_--_PNG96.png" alt="" title=""/>. In <a class="xref" href="#ID_559f2e854141fbdd0a00206a01e459cd-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "Log likelihood function (step 1)"</a> the known pilot symbols a<sub>l,k</sub> are read from a table.</p><p>In the second step, the log likelihood function is calculated for every symbol l as a function of the trial parameters <img border="0" src="Resources/Images/img573429242b859a4b0a00201900deadc0_1_--_--_PNG96.png" alt="" title=""/><sub>l</sub> and d<img border="0" src="Resources/Images/imge5a768a22b859ba30a002019013663e5_1_--_--_PNG96.png" alt="" title=""/><sub>l</sub>:</p><div class="block" id="ID_9164b1264141fbdd0a00206a00c3c7a1-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/img55416d5f2b63fa150a00201901866398_1_--_--_PNG96.png" alt="" title=""/></div><div class="caption">Log likelihood function (step 2)</div></div><p>Finally, the trial parameters leading to the minimum of the log likelihood function are used as estimates <span style="font-family: Arial Unicode MS; font-size: 10.5pt">ĝ</span><sub>l</sub> and <img border="0" src="Resources/Images/img60d693252b76c3130a002019009715b8_1_--_--_PNG96.png" alt="" title=""/>.</p><p>This robust algorithm works well even at low signal to noise ratios with the Cramer Rao Bound being reached.</p><div class="block"><div class="subtitle"><a name="ID_6b9b19902c88a0da0a0020190055b7f2-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Compensation</div></div><a name="kanchor224">
</a><p>After estimation of the parameters, the sequence r<sub>l,k</sub> is compensated in the compensation blocks.</p><p>In the upper analyzing branch the compensation is user-defined i.e. the user determines which of the parameters are compensated. This is useful in order to extract the influence of these parameters. The resulting output sequence is described by: <span style="font-family: Arial Unicode MS; font-size: 10.5pt">γ</span><sup>'</sup><sub><span style="font-family: Arial Unicode MS; font-size: 10.5pt">δ</span>,k</sub>.</p><div class="block"><div class="subtitle"><a name="ID_269565eb2c88a0da0a002019019fa768-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Data symbol estimation</div></div><a name="kanchor225">
</a><a name="kanchor226">
</a><p>In the lower compensation branch the full compensation is always performed. This separate compensation is necessary in order to avoid symbol errors. After the full compensation the secure estimation of the data symbols â<sub>l,k</sub> is performed. From <a class="xref" href="#ID_18e48af64141fbdd0a00206a00ea72e0-a152f5e2a64dafbf0a002019017fdb4d-en-US">Equation "FFT"</a> it is clear that first the channel transfer function H<sub>k</sub> must be removed. This is achieved by dividing the known coarse channel estimate <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub> calculated from the LS. Usually an error free estimation of the data symbols can be assumed.</p><div class="block"><div class="subtitle"><a name="ID_bba4e6db2c88a0da0a00201900a7ae16-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Improving the channel estimation</div></div><a name="kanchor227">
</a><a name="kanchor228">
</a><p>In the next block a better channel estimate <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(PL)</sup><sub>k</sub> of the data and pilot subcarriers is calculated by using all "nof_symbols" symbols of the payload (PL). This can be accomplished at this point because the phase is compensated and the data symbols are known. The long observation interval of nof_symbols symbols (compared to the short interval of 2 symbols for the estimation of <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub>) leads to a nearly error-free channel estimate.</p><p>In the following equalizer block, <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub> is compensated by the channel estimate. The resulting channel-compensated sequence is described by <span style="font-family: Arial Unicode MS; font-size: 10.5pt">γ</span><sub><span style="font-family: Arial Unicode MS; font-size: 10.5pt">δ</span>,k</sub><sup>''</sup>. The user may either choose the coarse channel estimate <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub> (from the long symbol) or the nearly error-free channel estimate <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(PL)</sup><sub>k</sub> (from the payload) for equalization. If the improved estimate <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub> is used, a 2 dB reduction of the subsequent EVM measurement can be expected.</p><p>According to the IEEE 802.11a measurement standard [6], the coarse channel estimation <span style="font-family: Arial Unicode MS; font-size: 10.5pt">Ĥ</span><sup>(LS)</sup><sub>k</sub> (from the long symbol) has to be used for equalization. Therefore the default setting of the R&amp;S<span style="font-family: Arial Unicode MS; font-size: 10.5pt"> </span>FSW WLAN application is equalization from the coarse channel estimate derived from the long symbol.</p><div class="block"><div class="subtitle"><a name="ID_1e1074712c88a0da0a0020190096643c-a152f5e2a64dafbf0a002019017fdb4d-en-US">
</a>Calculating error parameters</div></div><a name="kanchor229">
</a><a name="kanchor230">
</a><p>In the last block the parameters of the demodulated signal are calculated. The most important parameter is the error vector magnitude of the subcarrier "k" of the current packet:</p><div class="block" id="ID_6e9ebedc4141fbdd0a00206a01673303-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/img7650d4c5413bda4b0a00206a01403c60_1_--_--_PNG96.png" alt="" title=""/></div><div class="caption">Error vector magnitude of the subcarrier k in current packet</div></div><p>Furthermore, the packet error vector magnitude is derived by averaging the squared EVM<sub>k</sub> versus k:</p><div class="block" id="ID_9f052c7a4141fbdd0a00206a0046265f-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/img75e52851413c00de0a00206a01ebc435_1_--_--_PNG96.png" alt="" title=""/></div><div class="caption">Error vector magnitude of the entire packet</div></div><p>Finally, the average error vector magnitude is calculated by averaging the packet EVM of all nof_symbols detected packets:</p><div class="block" id="ID_535b70364141fbdd0a00206a0181543f-a152f5e2a64dafbf0a002019017fdb4d-en-US"><div class="graphic"><img border="0" src="Resources/Images/imgba0e1ea4413c21280a00206a0051215b_1_--_--_PNG96.png" alt="" title=""/></div><div class="caption">Average error vector magnitude</div></div><p>This parameter is equivalent to the "RMS average of all errors": Error<sub>RMS</sub> of the IEEE 802.11a measurement commandment (see [6]).</p>
						
						<div class="chm-go-to-top">
							<span>
								<a class="chm-go-to-top" href="#top">Top</a>
							</span>
						</div>
					</div></div><script type="text/javascript" src="SkinSupport/MadCapBodyEnd.js">/* <![CDATA[ */
/* ]]> */</script></body></html>